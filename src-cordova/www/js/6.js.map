{"version":3,"sources":["webpack:///../src/mixins/mixin-user-details.js","webpack:///../src/pages/Chat.vue?7faa","webpack:///../src/pages/Chat.vue?c69b","webpack:///../src/pages/Chat.vue","webpack:///../src/pages/Chat.vue?509a","webpack:///../src/pages/Chat.vue?b05d","webpack:///../src/pages/Chat.vue?6398"],"names":["computed","otherUserDetails","details","$store","state","user","users","$route","params","otherUserId"],"mappings":";;;;;;AAAe;AACbA,UAAQ,EAAE;AACRC,oBADQ,8BACW;AACjB,UAAIC,OAAO,GAAG,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,IAAlB,CAAuBC,KAAvB,CAA6B,KAAKC,MAAL,CAAYC,MAAZ,CAAmBC,WAAhD,CAAd;;AACA,UAAIP,OAAJ,EAAa;AACX,eAAOA,OAAP;AACD;;AACD,aAAO,EAAP;AACD;AAPO;AADG,CAAf,E;;;;;;;;ACAA;AAAA;AAAA;;;;;;;;;;;;;ACAA,0BAA0B,aAAa,0BAA0B,wBAAwB,oBAAoB,6CAA6C,kDAAkD,8CAA8C,4FAA4F,oDAAoD,gCAAgC,6CAA6C,4BAA4B,eAAe,kQAAkQ,EAAE,oBAAoB,6BAA6B,eAAe,+BAA+B,iCAAiC,0BAA0B,gBAAgB,6CAA6C,0FAA0F,KAAK,0BAA0B,QAAQ,gDAAgD,mBAAmB,0BAA0B,cAAc,OAAO,2EAA2E;AAC3xC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgDA;AACA;AACA;AACA,iDADA;AAEA,MAFA,kBAEA;AACA;AACA,oBADA;AAEA;AAFA;AAIA,GAPA;AAQA,gEACA,6DADA,GAEA,6DAFA,CARA;AAYA,uFACA,kGADA,GAEA,uEAFA;AAGA,oBAHA,8BAGA;AACA;AACA;AACA,KANA;AAOA,eAPA,yBAOA;AACA;AACA;AACA;AACA,iCADA;AAEA;AAFA,WADA;AAKA;AALA;AAOA;;AACA;AACA,KAlBA;AAmBA,kBAnBA,4BAmBA;AACA;AACA;AACA;AACA,OAFA,EAEA,EAFA;AAGA;AAxBA,IAZA;AAsCA;AACA;AAAA;;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA;AANA,GAtCA;AA8CA,SA9CA,qBA8CA;AACA;AACA,GAhDA;AAiDA,WAjDA,uBAiDA;AACA;AACA;AAnDA,G;;ACnD0U,CAAgB,mGAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA/P;AACvC;AACL;AACsC;;;AAGzF;AAC0F;AAC1F,gBAAgB,8CAAU;AAC1B,EAAE,kCAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,2FAAiB;AACwB;AACM;AACQ;AACR;AACG;AACT;AACG;AACN;AACoC;AACzF,6BAAQ,2BAA2B,+BAAK,CAAC,mCAAO,CAAC,6CAAY,CAAC,mCAAO,CAAC,qCAAQ,CAAC,+BAAK,CAAC,iCAAM,CAAC,6BAAI,CAAC;;;;;;;;AC7BjG,uC","file":"js/6.js","sourcesContent":["export default {\n  computed: {\n    otherUserDetails() {\n      let details = this.$store.state.user.users[this.$route.params.otherUserId];\n      if (details) {\n        return details\n      }\n      return {}\n    }\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-2-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-2-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-2-3!../../node_modules/@quasar/app/lib/webpack/loader.quasar-scss-variables.js!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=1a221585&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{ref:\"chatRef\",staticClass:\"chat flex column\"},[(!_vm.otherUserDetails.isActive)?_c('q-banner',{staticClass:\"bg-grey-4 text-center fixed-top\"},[_vm._v(\"\\n    \"+_vm._s(_vm.otherUserDetails.name)+\" is offline\\n  \")]):_vm._e(),_c('div',{staticClass:\"q-pa-md column col justify-end\",class:{ invisible: !_vm.showMessages }},_vm._l((_vm.messages),function(message,key){return _c('q-chat-message',{key:key,attrs:{\"name\":message.from == 'me' ? _vm.userDetails.name : _vm.otherUserDetails.name,\"avatar\":message.from == 'me' ? _vm.userDetails.image : _vm.otherUserDetails.image,\"size\":\"6\",\"text\":[message.text],\"text-sanitize\":\"\",\"sent\":message.from == 'me' ? true : false}})}),1),_c('q-footer',{staticClass:\"q-pa-xs\",attrs:{\"elevated\":\"\"}},[_c('q-toolbar',[_c('q-form',{staticClass:\"full-width row\",on:{\"submit\":_vm.sendMessage}},[_c('q-input',{ref:\"newMessage\",staticClass:\"col 11\",attrs:{\"bg-color\":\"white\",\"label\":\"Message\",\"outlined\":\"\",\"rounded\":\"\",\"clearable\":\"\",\"dense\":\"\"},on:{\"blur\":_vm.scrollToBottom},model:{value:(_vm.newMessage),callback:function ($$v) {_vm.newMessage=$$v},expression:\"newMessage\"}}),_c('q-btn',{attrs:{\"id\":\"send\",\"round\":\"\",\"dense\":\"\",\"flat\":\"\",\"type\":\"submit\",\"icon\":\"send\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <q-page ref=\"chatRef\" class=\"chat flex column\">\n    <q-banner\n      v-if=\"!otherUserDetails.isActive\"\n      class=\"bg-grey-4 text-center fixed-top\"\n    >\n      {{ otherUserDetails.name }} is offline\n    </q-banner>\n    <div\n      :class=\"{ invisible: !showMessages }\"\n      class=\"q-pa-md column col justify-end\"\n    >\n      <q-chat-message\n        v-for=\"(message, key) in messages\"\n        :key=\"key\"\n        :name=\"message.from == 'me' ? userDetails.name : otherUserDetails.name\"\n        :avatar=\"\n          message.from == 'me' ? userDetails.image : otherUserDetails.image\n        \"\n        size=\"6\"\n        :text=\"[message.text]\"\n        text-sanitize\n        :sent=\"message.from == 'me' ? true : false\"\n      />\n    </div>\n    <q-footer elevated class=\"q-pa-xs\">\n      <q-toolbar>\n        <q-form @submit=\"sendMessage\" class=\"full-width row\">\n          <q-input\n            v-model=\"newMessage\"\n            @blur=\"scrollToBottom\"\n            ref=\"newMessage\"\n            bg-color=\"white\"\n            label=\"Message\"\n            class=\"col 11\"\n            outlined\n            rounded\n            clearable\n            dense\n          >\n          </q-input>\n          <q-btn id=\"send\" round dense flat type=\"submit\" icon=\"send\" />\n        </q-form>\n      </q-toolbar>\n    </q-footer>\n  </q-page>\n</template>\n\n<script>\nimport { mapActions, mapState } from \"vuex\";\nimport mixinUserDetails from \"../mixins/mixin-user-details\";\nexport default {\n  mixins: [mixinUserDetails],\n  data() {\n    return {\n      newMessage: \"\",\n      showMessages: false\n    };\n  },\n  computed: {\n    ...mapState(\"message\", [\"messages\"]),\n    ...mapState(\"user\", [\"userDetails\"])\n  },\n  methods: {\n    ...mapActions(\"message\", [\"firebaseGetMessages\", \"firebaseStopMessages\"]),\n    ...mapActions(\"user\", [\"firebaseSendMessage\"]),\n    clearMessageForm() {\n      this.$refs.newMessage.focus();\n      this.newMessage = \"\";\n    },\n    sendMessage() {\n      if (this.newMessage) {\n        this.firebaseSendMessage({\n          message: {\n            text: this.newMessage,\n            from: \"me\"\n          },\n          otherUserId: this.$route.params.otherUserId\n        });\n      }\n      this.clearMessageForm();\n    },\n    scrollToBottom() {\n      let chatPage = this.$refs.chatRef.$el;\n      setTimeout(() => {\n        window.scrollTo(0, chatPage.scrollHeight);\n      }, 20);\n    }\n  },\n  watch: {\n    messages: function(val) {\n      if (Object.keys(val).length) this.scrollToBottom();\n      setTimeout(() => {\n        this.showMessages = true;\n      }, 200);\n    }\n  },\n  mounted() {\n    this.firebaseGetMessages(this.$route.params.otherUserId);\n  },\n  destroyed() {\n    this.firebaseStopMessages();\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.q-banner {\n  width: 80vw;\n  margin: 0 auto;\n  top: 50px;\n  z-index: 2;\n  opacity: 0.8;\n  @media (max-width: $breakpoint-xs-max) {\n    width: 100%;\n  }\n}\n.chat {\n  position: relative;\n  width: 80vw;\n  max-width: auto;\n  background-color: #faf9fc !important;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23e2a5b3' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\") !important;\n  @media (max-width: $breakpoint-xs-max) {\n    width: 100%;\n  }\n}\n.q-footer {\n  width: 80vw;\n  margin: 0 auto;\n  @media (max-width: $breakpoint-xs-max) {\n    width: 100%;\n  }\n}\n#send {\n  color: $white;\n  margin: 0 auto;\n}\n.q-banner{\n  z-index: 2;\n  top: 50px;\n}\n</style>\n","import mod from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=1a221585&scoped=true&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=1a221585&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a221585\",\n  null\n  \n)\n\nexport default component.exports\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QChatMessage from 'quasar/src/components/chat/QChatMessage.js';\nimport QFooter from 'quasar/src/components/footer/QFooter.js';\nimport QToolbar from 'quasar/src/components/toolbar/QToolbar.js';\nimport QForm from 'quasar/src/components/form/QForm.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(component, 'components', {QPage,QBanner,QChatMessage,QFooter,QToolbar,QForm,QInput,QBtn});\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}