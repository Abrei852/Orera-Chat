(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{4845:function(e,s,t){"use strict";s["a"]={computed:{otherUserDetails:function(){var e=this.$store.state.user.users[this.$route.params.otherUserId];return e||{}}}}},"4e32":function(e,s,t){"use strict";t("dcc5")},"6d6a":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{ref:"chatRef",staticClass:"chat flex column"},[e.otherUserDetails.isActive?e._e():t("q-banner",{staticClass:"bg-grey-4 text-center fixed-top"},[e._v("\n    "+e._s(e.otherUserDetails.name)+" is offline\n  ")]),t("div",{staticClass:"q-pa-md column col justify-end",class:{invisible:!e.showMessages}},e._l(e.messages,(function(s,a){return t("q-chat-message",{key:a,attrs:{name:"me"==s.from?e.userDetails.name:e.otherUserDetails.name,avatar:"me"==s.from?e.userDetails.image:e.otherUserDetails.image,size:"6",text:[s.text],"text-sanitize":"",sent:"me"==s.from}})})),1),t("q-footer",{staticClass:"q-pa-xs",attrs:{elevated:""}},[t("q-toolbar",[t("q-form",{staticClass:"full-width row",on:{submit:e.sendMessage}},[t("q-input",{ref:"newMessage",staticClass:"col 11",attrs:{"bg-color":"white",label:"Message",outlined:"",rounded:"",clearable:"",dense:""},on:{blur:e.scrollToBottom},model:{value:e.newMessage,callback:function(s){e.newMessage=s},expression:"newMessage"}}),t("q-btn",{attrs:{id:"send",round:"",dense:"",flat:"",type:"submit",icon:"send"}})],1)],1)],1)],1)},n=[],o=(t("494a"),t("c8ef")),r=t.n(o),i=t("94ea"),c=t("4845"),l={mixins:[c["a"]],data:function(){return{newMessage:"",showMessages:!1}},computed:r()(r()({},Object(i["d"])("message",["messages"])),Object(i["d"])("user",["userDetails"])),methods:r()(r()(r()({},Object(i["b"])("message",["firebaseGetMessages","firebaseStopMessages"])),Object(i["b"])("user",["firebaseSendMessage"])),{},{clearMessageForm:function(){this.$refs.newMessage.focus(),this.newMessage=""},sendMessage:function(){this.newMessage&&this.firebaseSendMessage({message:{text:this.newMessage,from:"me"},otherUserId:this.$route.params.otherUserId}),this.clearMessageForm()},scrollToBottom:function(){var e=this.$refs.chatRef.$el;setTimeout((function(){window.scrollTo(0,e.scrollHeight)}),20)}}),watch:{messages:function(e){var s=this;Object.keys(e).length&&this.scrollToBottom(),setTimeout((function(){s.showMessages=!0}),200)}},mounted:function(){this.firebaseGetMessages(this.$route.params.otherUserId)},destroyed:function(){this.firebaseStopMessages()}},u=l,f=(t("4e32"),t("a6c2")),m=t("505d"),d=t("91e4"),g=t("273c"),h=t("d09b"),b=t("66cf"),w=t("3548"),M=t("a3be"),p=t("ef9c"),v=t("63c1"),x=t.n(v),q=Object(f["a"])(u,a,n,!1,null,"1a221585",null);s["default"]=q.exports;x()(q,"components",{QPage:m["a"],QBanner:d["a"],QChatMessage:g["a"],QFooter:h["a"],QToolbar:b["a"],QForm:w["a"],QInput:M["a"],QBtn:p["a"]})},dcc5:function(e,s,t){}}]);